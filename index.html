<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Click the Enemies</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js"></script>
</head>
<body>
    <script>
        let enemies = [];
        let centerX, centerY;
        let centerRadius = 50;
        let gameOver = false;
        let score = 0;

        function setup() {
            createCanvas(800, 600);
            centerX = width / 2;
            centerY = height / 2;
            setInterval(spawnEnemy, 1000);
        }

        function draw() {
            if (gameOver) {
                background(0);
                fill(255);
                textSize(32);
                textAlign(CENTER, CENTER);
                text(`Game Over! Score: ${score}`, width / 2, height / 2);
                return;
            }

            background(0);

            // Центр (синее поле)
            fill(0, 0, 255);
            ellipse(centerX, centerY, centerRadius * 2);

            // Враги
            for (let i = enemies.length - 1; i >= 0; i--) {
                enemies[i].move();
                enemies[i].display();

                if (enemies[i].reachedCenter()) {
                    gameOver = true;
                }
            }

            // Очки
            fill(255);
            textSize(20);
            text(`Score: ${score}`, 10, 30);
        }

        function mousePressed() {
            for (let i = enemies.length - 1; i >= 0; i--) {
                if (enemies[i].clicked(mouseX, mouseY)) {
                    enemies.splice(i, 1);
                    score += 1;
                }
            }
        }

        class Enemy {
            constructor() {
                let side = floor(random(4));
                if (side === 0) {
                    this.x = 0;
                    this.y = random(height);
                } else if (side === 1) {
                    this.x = width;
                    this.y = random(height);
                } else if (side === 2) {
                    this.x = random(width);
                    this.y = 0;
                } else {
                    this.x = random(width);
                    this.y = height;
                }

                this.radius = random(15, 25);
                this.speed = random(1, 3);
                let dx = centerX - this.x;
                let dy = centerY - this.y;
                let distance = sqrt(dx * dx + dy * dy);
                this.vx = (dx / distance) * this.speed;
                this.vy = (dy / distance) * this.speed;
            }

            move() {
                this.x += this.vx;
                this.y += this.vy;
            }

            display() {
                fill(255, 0, 0);
                ellipse(this.x, this.y, this.radius * 2);
            }

            clicked(px, py) {
                return dist(px, py, this.x, this.y) < this.radius;
            }

            reachedCenter() {
                return dist(this.x, this.y, centerX, centerY) < centerRadius;
            }
        }

        function spawnEnemy() {
            if (!gameOver) {
                enemies.push(new Enemy());
            }
        }
    </script>
</body>
</html>
